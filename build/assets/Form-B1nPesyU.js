import{f as U,r as D,T as z,a as W,g as q,w as L,e as g,b as E,d as I,k as y,i as B,v as Y,C as X,D as $}from"./app-DmIf2hag.js";import{V as j,p as K,a as Z,b as J}from"./vue-filepond.esm-Blpi4Iqd.js";/* empty css                                          */import{c as Q}from"./createVueComponent-Da9bORDl.js";import{v as ee}from"./MazInput-Bh4h0r_b-DdTcKV2-.js";import{P as te}from"./MazBtn-Db9bWwr8-BXMMD6UX.js";import{_ as ae}from"./InputLabel.vue_vue_type_script_setup_true_lang-CVCT5VCK.js";import{_ as x}from"./InputError.vue_vue_type_script_setup_true_lang-llwGMIzL.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css               *//**
 * @license @tabler/icons-vue v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ie=Q("outline","photo-up","IconPhotoUp",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526",key:"svg-3"}],["path",{d:"M19 22v-6",key:"svg-4"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-5"}]]);/*!
 * FilePondPluginFilePoster 2.5.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const H={type:"spring",stiffness:.5,damping:.45,mass:10},le=t=>t.utils.createView({name:"file-poster",tag:"div",ignoreRect:!0,create:({root:a})=>{a.ref.image=document.createElement("img"),a.element.appendChild(a.ref.image)},write:t.utils.createRoute({DID_FILE_POSTER_LOAD:({root:a,props:l})=>{const{id:s}=l,c=a.query("GET_ITEM",{id:l.id});if(!c)return;const i=c.getMetadata("poster");a.ref.image.src=i,a.dispatch("DID_FILE_POSTER_DRAW",{id:s})}}),mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:H,scaleY:H,opacity:{type:"tween",duration:750}}}}),se=(t,a)=>{a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0)},oe=t=>t.utils.createView({name:"file-poster-overlay",tag:"canvas",ignoreRect:!0,create:({root:a,props:l})=>{se(l.template,a.element)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),ne=(t,a)=>{let l=new Image;l.onload=()=>{const s=l.naturalWidth,c=l.naturalHeight;l=null,a(s,c)},l.src=t},ce=t=>-.5*(Math.cos(Math.PI*t)-1),de=(t,a,l=1,s=ce,c=10,i=0)=>{const d=1-i,u=a.join(",");for(let p=0;p<=c;p++){const e=p/c,n=i+d*e;t.addColorStop(n,`rgba(${u}, ${s(e)*l})`)}},pe=10,fe=10,ue=t=>{const a=Math.min(pe/t.width,fe/t.height),l=document.createElement("canvas"),s=l.getContext("2d"),c=l.width=Math.ceil(t.width*a),i=l.height=Math.ceil(t.height*a);s.drawImage(t,0,0,c,i);let d=null;try{d=s.getImageData(0,0,c,i).data}catch{return null}const u=d.length;let p=0,e=0,n=0,o=0;for(;o<u;o+=4)p+=d[o]*d[o],e+=d[o+1]*d[o+1],n+=d[o+2]*d[o+2];return p=b(p,u),e=b(e,u),n=b(n,u),{r:p,g:e,b:n}},b=(t,a)=>Math.floor(Math.sqrt(t/(a/4))),P=(t,a,l,s,c)=>{t.width=a,t.height=l;const i=t.getContext("2d"),d=a*.5,u=i.createRadialGradient(d,l+110,l-100,d,l+110,l+100);de(u,s,c,void 0,8,.4),i.save(),i.translate(-a*.5,0),i.scale(2,1),i.fillStyle=u,i.fillRect(0,0,a,l),i.restore()},M=typeof navigator<"u",v=500,R=200,F=M&&document.createElement("canvas"),V=M&&document.createElement("canvas"),G=M&&document.createElement("canvas");let S=[40,40,40],C=[196,78,71],O=[54,151,99];M&&(P(F,v,R,S,.85),P(V,v,R,C,1),P(G,v,R,O,1));const me=(t,a)=>new Promise((l,s)=>{const c=new Image;typeof crossOrigin=="string"&&(c.crossOrigin=a),c.onload=()=>{l(c)},c.onerror=i=>{s(i)},c.src=t}),_e=t=>{const a=oe(t),l=({root:e,props:n})=>{const{id:o}=n,m=e.query("GET_ITEM",o);if(!m)return;const T=m.getMetadata("poster"),w=r=>{const f=e.query("GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR")?ue(r):null;m.setMetadata("color",f,!0),e.dispatch("DID_FILE_POSTER_LOAD",{id:o,data:r})};ne(T,(r,f)=>{e.dispatch("DID_FILE_POSTER_CALCULATE_SIZE",{id:o,width:r,height:f}),me(T,e.query("GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE")).then(w)})},s=({root:e})=>{e.ref.overlayShadow.opacity=1},c=({root:e})=>{const{image:n}=e.ref;n.scaleX=1,n.scaleY=1,n.opacity=1},i=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},d=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1},u=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},p=({root:e,props:n})=>{const o=e.query("GET_FILE_POSTER_ITEM_OVERLAY_SHADOW_COLOR"),m=e.query("GET_FILE_POSTER_ITEM_OVERLAY_ERROR_COLOR"),T=e.query("GET_FILE_POSTER_ITEM_OVERLAY_SUCCESS_COLOR");o&&o!==S&&(S=o,P(F,v,R,S,.85)),m&&m!==C&&(C=m,P(V,v,R,C,1)),T&&T!==O&&(O=T,P(G,v,R,O,1));const w=le(t);e.ref.image=e.appendChildView(e.createChildView(w,{id:n.id,scaleX:1.25,scaleY:1.25,opacity:0})),e.ref.overlayShadow=e.appendChildView(e.createChildView(a,{template:F,opacity:0})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(a,{template:G,opacity:0})),e.ref.overlayError=e.appendChildView(e.createChildView(a,{template:V,opacity:0}))};return t.utils.createView({name:"file-poster-wrapper",create:p,write:t.utils.createRoute({DID_FILE_POSTER_LOAD:s,DID_FILE_POSTER_DRAW:c,DID_FILE_POSTER_CONTAINER_CREATE:l,DID_THROW_ITEM_LOAD_ERROR:d,DID_THROW_ITEM_PROCESSING_ERROR:d,DID_THROW_ITEM_INVALID:d,DID_COMPLETE_ITEM_PROCESSING:u,DID_START_ITEM_PROCESSING:i,DID_REVERT_ITEM_PROCESSING:i})})},N=t=>{const{addFilter:a,utils:l}=t,{Type:s,createRoute:c}=l,i=_e(t);return a("CREATE_VIEW",d=>{const{is:u,view:p,query:e}=d;if(!u("file")||!e("GET_ALLOW_FILE_POSTER"))return;const n=({root:r,props:f})=>{m(r,f)},o=({root:r,props:f,action:_})=>{/poster/.test(_.change.key)&&m(r,f)},m=(r,f)=>{const{id:_}=f,h=e("GET_ITEM",_);!h||!h.getMetadata("poster")||h.archived||r.ref.previousPoster!==h.getMetadata("poster")&&(r.ref.previousPoster=h.getMetadata("poster"),e("GET_FILE_POSTER_FILTER_ITEM")(h)&&(r.ref.filePoster&&p.removeChildView(r.ref.filePoster),r.ref.filePoster=p.appendChildView(p.createChildView(i,{id:_})),r.dispatch("DID_FILE_POSTER_CONTAINER_CREATE",{id:_})))},T=({root:r,action:f})=>{r.ref.filePoster&&(r.ref.imageWidth=f.width,r.ref.imageHeight=f.height,r.ref.shouldUpdatePanelHeight=!0,r.dispatch("KICK"))},w=({root:r})=>{let f=r.query("GET_FILE_POSTER_HEIGHT");if(f)return f;const _=r.query("GET_FILE_POSTER_MIN_HEIGHT"),h=r.query("GET_FILE_POSTER_MAX_HEIGHT");if(_&&r.ref.imageHeight<_)return _;let A=r.rect.element.width*(r.ref.imageHeight/r.ref.imageWidth);return _&&A<_?_:h&&A>h?h:A};p.registerWriter(c({DID_LOAD_ITEM:n,DID_FILE_POSTER_CALCULATE_SIZE:T,DID_UPDATE_ITEM_METADATA:o},({root:r,props:f})=>{r.ref.filePoster&&(r.rect.element.hidden||r.ref.shouldUpdatePanelHeight&&(r.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:f.id,height:w({root:r})}),r.ref.shouldUpdatePanelHeight=!1))}))}),{options:{allowFilePoster:[!0,s.BOOLEAN],filePosterHeight:[null,s.INT],filePosterMinHeight:[null,s.INT],filePosterMaxHeight:[null,s.INT],filePosterFilterItem:[()=>!0,s.FUNCTION],filePosterCalculateAverageImageColor:[!1,s.BOOLEAN],filePosterCrossOriginAttributeValue:["Anonymous",s.STRING],filePosterItemOverlayShadowColor:[null,s.ARRAY],filePosterItemOverlayErrorColor:[null,s.ARRAY],filePosterItemOverlaySuccessColor:[null,s.ARRAY]}}},ge=typeof window<"u"&&typeof window.document<"u";ge&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:N}));const k=t=>(X("data-v-4de0bf55"),t=t(),$(),t),Ee=k(()=>E("h1",{class:"text-2xl font-bold sm:text-xl dark:text-white"}," Upload a new logo ",-1)),he=k(()=>E("p",{class:"mt-2 text-lg text-gray-600 dark:text-gray-400"},[y(" Upload a logo in "),E("strong",null,".svg"),y(", "),E("strong",null,".ai"),y(", "),E("strong",null,".cdr"),y(", or "),E("strong",null,".pdf"),y(" format. ")],-1)),Ie={class:"mb-4"},Te=U({__name:"Form",setup(t){const a=j(J,Z,K,N),l=D(),s=D(),c=["application/pdf","image/svg+xml","application/postscript","image/x-coreldraw"],i=z({brand:"",poster:"",file_path:""}),d=()=>{var o;const n=(o=l.value)==null?void 0:o.getFile();n&&n.file?i.poster=n.file:i.poster=""},u=()=>{var o;const n=(o=s.value)==null?void 0:o.getFile();n&&n.file?i.file_path=n.file:i.file_path=""},p=D(),e=()=>{i.post(route("auth.downloads.store"),{preserveScroll:!0,onSuccess:()=>{l.value=void 0,s.value=void 0,i.reset(),p.value.close()}})};return(n,o)=>(W(),q(g(Y),{ref_key:"logoModalRef",ref:p,"panel-classes":"bg-gray-100 rounded-lg dark:bg-gray-700",position:"top"},{default:L(()=>[Ee,he,E("form",{onSubmit:B(e,["prevent"]),class:"flex flex-col mt-8"},[E("div",Ie,[I(ae,{for:"brand",value:"Brand name"}),I(g(ee),{type:"text",modelValue:g(i).brand,"onUpdate:modelValue":o[0]||(o[0]=m=>g(i).brand=m),id:"brand",placeholder:"Enter brand name",class:"w-full mt-2","rounded-size":"md",size:"lg"},null,8,["modelValue"]),I(x,{message:g(i).errors.brand},null,8,["message"])]),E("div",null,[I(g(a),{name:"thumbnail",ref_key:"thumbnailPond",ref:l,credits:"false",onAddfile:d,acceptedFileTypes:"image/png, image/jpeg",labelMaxFileSizeExceeded:"The thumbnail is too large",labelMaxFileSize:"Max thumbnail size is {filesize}",maxFileSize:"1MB",labelIdle:'Drop a logo thumbnail or <span class="filepond--label-action">Browse</span>',allowMultiple:!1,class:"mt-1 filepond dark:border-gray-700 dark:bg-gray-900 dark:text-white"},null,512),I(x,{message:g(i).errors.poster},null,8,["message"])]),E("div",null,[I(g(a),{name:"logo",ref_key:"logoPond",ref:s,credits:"false",onAddfile:u,acceptedFileTypes:c,labelMaxFileSizeExceeded:"Your logo is too large",labelMaxFileSize:"Max logo size is {filesize}",maxFileSize:"2MB",labelIdle:'Drop your logo or <span class="filepond--label-action">Browse</span>',allowMultiple:!1,class:"mt-4 filepond dark:border-gray-700 dark:bg-gray-900 dark:text-white"},null,512),I(x,{message:g(i).errors.file_path},null,8,["message"])]),E("div",null,[I(g(te),{type:"submit",class:"mt-4","rounded-size":"md",color:"success",loading:g(i).processing},{"left-icon":L(()=>[I(g(ie),{size:"24"})]),default:L(()=>[y(" Upload ")]),_:1},8,["loading"])])],32)]),_:1},512))}}),De=re(Te,[["__scopeId","data-v-4de0bf55"]]);export{De as default};
